# hw definition file for processing by chibios_pins.py

# MCU class and specific type
MCU STM32F4xx STM32F446xx

FLASH_RESERVE_START_KB 0
# two sectors for bootloader, two for storage
FLASH_BOOTLOADER_LOAD_KB 64

# board ID for firmware load
APJ_BOARD_ID 1001

# setup build for a peripheral firmware
env AP_PERIPH 1

define CAN_APP_NODE_NAME "Arys_PDB_Periph_Bootloader"

OSCILLATOR_HZ 0
define CH_CFG_ST_FREQUENCY 10000

# assume 512k flash part
FLASH_SIZE_KB 512

PD3 LED_BOOTLOADER OUTPUT HIGH
define HAL_LED_ON 1

# |PORT0|PORT1|
SERIAL_ORDER USART6 UART4

# USART1 for debug
PC6 USART6_TX USART6
PC7 USART6_RX USART6

# UART4 for RangeFider
PC10 UART4_TX UART4
PC11 UART4_RX UART4

PA13 JTMS-SWDIO SWD
PA14 JTCK-SWCLK SWD
PB3  FMU_SW0 INPUT

# ECU - we don't use this at the moment, but it must be enabled for CAN2 to work
PB8 CAN1_RX CAN1
PB9 CAN1_TX CAN1

# make bl baudrate match debug baudrate for easier debugging
define BOOTLOADER_BAUDRATE 57600

# use a small bootloader timeout
define HAL_BOOTLOADER_TIMEOUT 10000